import{aS as t,ag as e,_ as i,J as o,an as n,a5 as a,aT as s,aU as r,aV as l,H as h,aj as d,K as u,ah as p,c,aW as g,aX as f,A as v,ab as m,aY as y,ak as _,aZ as x,a_ as M,a$ as w,b0 as S,l as b,T as A,b1 as D,m as I,U as R,G as T,av as Z,a9 as C,b2 as P,k as z,p as V,aq as O,Q as B,ar as L,R as E,b3 as W,b4 as k,b5 as H,a8 as Y,b6 as X,b7 as N,b8 as F,v as G}from"./39317677.js";var U="\0_ec_interaction_mutex";function K(t,e){return!!function(t){return t[U]||(t[U]={})}(t)[e]}function j(t,e,i,o,n){t.pointerChecker&&t.pointerChecker(o,n.originX,n.originY)&&(r(o.event),q(t,e,i,o,n))}function q(t,e,i,n,a){a.isAvailableBehavior=o(J,null,i,n),t.trigger(e,a)}function J(t,e,i){var o=i[t];return!t||o&&(!h(o)||e.event[o+"Key"])}t({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},e);const Q=function(t){function e(e){var i=t.call(this)||this;i._zr=e;var s=o(i._mousedownHandler,i),r=o(i._mousemoveHandler,i),l=o(i._mouseupHandler,i),h=o(i._mousewheelHandler,i),d=o(i._pinchHandler,i);return i.enable=function(t,i){this.disable(),this._opt=n(a(i)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==t&&(t=!0),!0!==t&&"move"!==t&&"pan"!==t||(e.on("mousedown",s),e.on("mousemove",r),e.on("mouseup",l)),!0!==t&&"scale"!==t&&"zoom"!==t||(e.on("mousewheel",h),e.on("pinch",d))},i.disable=function(){e.off("mousedown",s),e.off("mousemove",r),e.off("mouseup",l),e.off("mousewheel",h),e.off("pinch",d)},i}return i(e,t),e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype.setPointerChecker=function(t){this.pointerChecker=t},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(t){if(!s(t)){for(var e=t.target;e;){if(e.draggable)return;e=e.__hostTarget||e.parent}var i=t.offsetX,o=t.offsetY;this.pointerChecker&&this.pointerChecker(t,i,o)&&(this._x=i,this._y=o,this._dragging=!0)}},e.prototype._mousemoveHandler=function(t){if(this._dragging&&J("moveOnMouseMove",t,this._opt)&&"pinch"!==t.gestureEvent&&!K(this._zr,"globalPan")){var e=t.offsetX,i=t.offsetY,o=this._x,n=this._y,a=e-o,s=i-n;this._x=e,this._y=i,this._opt.preventDefaultMouseMove&&r(t.event),q(this,"pan","moveOnMouseMove",t,{dx:a,dy:s,oldX:o,oldY:n,newX:e,newY:i,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(t){s(t)||(this._dragging=!1)},e.prototype._mousewheelHandler=function(t){var e=J("zoomOnMouseWheel",t,this._opt),i=J("moveOnMouseWheel",t,this._opt),o=t.wheelDelta,n=Math.abs(o),a=t.offsetX,s=t.offsetY;if(0!==o&&(e||i)){if(e){var r=n>3?1.4:n>1?1.2:1.1;j(this,"zoom","zoomOnMouseWheel",t,{scale:o>0?r:1/r,originX:a,originY:s,isAvailableBehavior:null})}if(i){var l=Math.abs(o);j(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:(o>0?1:-1)*(l>3?.4:l>1?.15:.05),originX:a,originY:s,isAvailableBehavior:null})}}},e.prototype._pinchHandler=function(t){K(this._zr,"globalPan")||j(this,"zoom",null,t,{scale:t.pinchScale>1?1.1:1/1.1,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})},e}(l);function $(t,e,i,o,n,a){t=t||0;var s=i[1]-i[0];if(null!=n&&(n=et(n,[0,s])),null!=a&&(a=Math.max(a,null!=n?n:0)),"all"===o){var r=Math.abs(e[1]-e[0]);r=et(r,[0,s]),n=a=et(r,[n,a]),o=0}e[0]=et(e[0],i),e[1]=et(e[1],i);var l=tt(e,o);e[o]+=t;var h,d=n||0,u=i.slice();return l.sign<0?u[0]+=d:u[1]-=d,e[o]=et(e[o],u),h=tt(e,o),null!=n&&(h.sign!==l.sign||h.span<n)&&(e[1-o]=e[o]+l.sign*n),h=tt(e,o),null!=a&&h.span>a&&(e[1-o]=e[o]+h.sign*a),e}function tt(t,e){var i=t[e]-t[1-e];return{span:Math.abs(i),sign:i>0?-1:i<0?1:e?-1:1}}function et(t,e){return Math.min(null!=e[1]?e[1]:1/0,Math.max(null!=e[0]?e[0]:-1/0,t))}var it=["x","y","radius","angle","single"],ot=["cartesian2d","polar","singleAxis"];function nt(t){return t+"Axis"}function at(t,e){var i,o=d(),n=[],a=d();t.eachComponent({mainType:"dataZoom",query:e},(function(t){a.get(t.uid)||r(t)}));do{i=!1,t.eachComponent("dataZoom",s)}while(i);function s(t){!a.get(t.uid)&&function(t){var e=!1;return t.eachTargetAxis((function(t,i){var n=o.get(t);n&&n[i]&&(e=!0)})),e}(t)&&(r(t),i=!0)}function r(t){a.set(t.uid,!0),n.push(t),t.eachTargetAxis((function(t,e){(o.get(t)||o.set(t,[]))[e]=!0}))}return n}function st(t){var e=t.ecModel,i={infoList:[],infoMap:d()};return t.eachTargetAxis((function(t,o){var n=e.getComponent(nt(t),o);if(n){var a=n.getCoordSysModel();if(a){var s=a.uid,r=i.infoMap.get(s);r||(r={model:a,axisModels:[]},i.infoList.push(r),i.infoMap.set(s,r)),r.axisModels.push(n)}}})),i}var rt=function(){function t(){this.indexList=[],this.indexMap=[]}return t.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},t}();function lt(t){var e={};return c(["start","end","startValue","endValue","throttle"],(function(i){t.hasOwnProperty(i)&&(e[i]=t[i])})),e}const ht=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i._autoThrottle=!0,i._noTarget=!0,i._rangePropMode=["percent","percent"],i}return i(e,t),e.prototype.init=function(t,e,i){var o=lt(t);this.settledOption=o,this.mergeDefaultAndTheme(t,i),this._doInit(o)},e.prototype.mergeOption=function(t){var e=lt(t);p(this.option,t,!0),p(this.settledOption,e,!0),this._doInit(e)},e.prototype._doInit=function(t){var e=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var i=this.settledOption;c([["start","startValue"],["end","endValue"]],(function(t,o){"value"===this._rangePropMode[o]&&(e[t[0]]=i[t[0]]=null)}),this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),e=this._targetAxisInfoMap=d();this._fillSpecifiedTargetAxis(e)?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(e,this._orient)),this._noTarget=!0,e.each((function(t){t.indexList.length&&(this._noTarget=!1)}),this)},e.prototype._fillSpecifiedTargetAxis=function(t){var e=!1;return c(it,(function(i){var o=this.getReferringComponents(nt(i),g);if(o.specified){e=!0;var n=new rt;c(o.models,(function(t){n.add(t.componentIndex)})),t.set(i,n)}}),this),e},e.prototype._fillAutoTargetAxisByOrient=function(t,e){var i=this.ecModel,o=!0;if(o){var n="vertical"===e?"y":"x";a(i.findComponents({mainType:n+"Axis"}),n)}o&&a(i.findComponents({mainType:"singleAxis",filter:function(t){return t.get("orient",!0)===e}}),"single");function a(e,i){var n=e[0];if(n){var a=new rt;if(a.add(n.componentIndex),t.set(i,a),o=!1,"x"===i||"y"===i){var s=n.getReferringComponents("grid",f).models[0];s&&c(e,(function(t){n.componentIndex!==t.componentIndex&&s===t.getReferringComponents("grid",f).models[0]&&a.add(t.componentIndex)}))}}}o&&c(it,(function(e){if(o){var n=i.findComponents({mainType:nt(e),filter:function(t){return"category"===t.get("type",!0)}});if(n[0]){var a=new rt;a.add(n[0].componentIndex),t.set(e,a),o=!1}}}),this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis((function(e){!t&&(t=e)}),this),"y"===t?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&e.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var e=this._rangePropMode,i=this.get("rangeMode");c([["start","startValue"],["end","endValue"]],(function(o,n){var a=null!=t[o[0]],s=null!=t[o[1]];a&&!s?e[n]="percent":!a&&s?e[n]="value":i?e[n]=i[n]:a&&(e[n]="percent")}))},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis((function(e,i){null==t&&(t=this.ecModel.getComponent(nt(e),i))}),this),t},e.prototype.eachTargetAxis=function(t,e){this._targetAxisInfoMap.each((function(i,o){c(i.indexList,(function(i){t.call(e,o,i)}))}))},e.prototype.getAxisProxy=function(t,e){var i=this.getAxisModel(t,e);if(i)return i.__dzAxisProxy},e.prototype.getAxisModel=function(t,e){var i=this._targetAxisInfoMap.get(t);if(i&&i.indexMap[e])return this.ecModel.getComponent(nt(t),e)},e.prototype.setRawRange=function(t){var e=this.option,i=this.settledOption;c([["start","startValue"],["end","endValue"]],(function(o){null==t[o[0]]&&null==t[o[1]]||(e[o[0]]=i[o[0]]=t[o[0]],e[o[1]]=i[o[1]]=t[o[1]])}),this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var e=this.option;c(["start","startValue","end","endValue"],(function(i){e[i]=t[i]}))},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,e){if(null!=t||null!=e)return this.getAxisProxy(t,e).getDataValueWindow();var i=this.findRepresentativeAxisProxy();return i?i.getDataValueWindow():void 0},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var e,i=this._targetAxisInfoMap.keys(),o=0;o<i.length;o++)for(var n=i[o],a=this._targetAxisInfoMap.get(n),s=0;s<a.indexList.length;s++){var r=this.getAxisProxy(n,a.indexList[s]);if(r.hostedBy(this))return r;e||(e=r)}return e},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(v);const dt=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return i(e,t),e.prototype.render=function(t,e,i,o){this.dataZoomModel=t,this.ecModel=e,this.api=i},e.type="dataZoom",e}(m);var ut=c,pt=S;const ct=function(){function t(t,e,i,o){this._dimName=t,this._axisIndex=e,this.ecModel=o,this._dataZoomModel=i}return t.prototype.hostedBy=function(t){return this._dataZoomModel===t},t.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},t.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},t.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries((function(e){if(function(t){var e=t.get("coordinateSystem");return u(ot,e)>=0}(e)){var i=nt(this._dimName),o=e.getReferringComponents(i,f).models[0];o&&this._axisIndex===o.componentIndex&&t.push(e)}}),this),t},t.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},t.prototype.getMinMaxSpan=function(){return a(this._minMaxSpan)},t.prototype.calculateDataWindow=function(t){var e,i=this._dataExtent,o=this.getAxisModel().axis.scale,n=this._dataZoomModel.getRangePropMode(),a=[0,100],s=[],r=[];ut(["start","end"],(function(l,h){var d=t[l],u=t[l+"Value"];"percent"===n[h]?(null==d&&(d=a[h]),u=o.parse(y(d,a,i))):(e=!0,u=null==u?i[h]:o.parse(u),d=y(u,i,a)),r[h]=null==u||isNaN(u)?i[h]:u,s[h]=null==d||isNaN(d)?a[h]:d})),pt(r),pt(s);var l=this._minMaxSpan;function h(t,e,i,n,a){var s=a?"Span":"ValueSpan";$(0,t,i,"all",l["min"+s],l["max"+s]);for(var r=0;r<2;r++)e[r]=y(t[r],i,n,!0),a&&(e[r]=o.parse(e[r]))}return e?h(r,s,i,a,!1):h(s,r,a,i,!0),{valueWindow:r,percentWindow:s}},t.prototype.reset=function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=function(t,e,i){var o=[1/0,-1/0];ut(i,(function(t){M(o,t.getData(),e)}));var n=t.getAxisModel(),a=w(n.axis.scale,n,o).calculate();return[a.min,a.max]}(this,this._dimName,e),this._updateMinMaxSpan();var i=this.calculateDataWindow(t.settledOption);this._valueWindow=i.valueWindow,this._percentWindow=i.percentWindow,this._setAxisModel()}},t.prototype.filterData=function(t,e){if(t===this._dataZoomModel){var i=this._dimName,o=this.getTargetSeriesModels(),n=t.get("filterMode"),a=this._valueWindow;"none"!==n&&ut(o,(function(t){var e=t.getData(),o=e.mapDimensionsAll(i);if(o.length){if("weakFilter"===n){var s=e.getStore(),r=_(o,(function(t){return e.getDimensionIndex(t)}),e);e.filterSelf((function(t){for(var e,i,n,l=0;l<o.length;l++){var h=s.get(r[l],t),d=!isNaN(h),u=h<a[0],p=h>a[1];if(d&&!u&&!p)return!0;d&&(n=!0),u&&(e=!0),p&&(i=!0)}return n&&e&&i}))}else ut(o,(function(i){if("empty"===n)t.setData(e=e.map(i,(function(t){return function(t){return t>=a[0]&&t<=a[1]}(t)?t:NaN})));else{var o={};o[i]=a,e.selectRange(o)}}));ut(o,(function(t){e.setApproximateExtent(a,t)}))}}))}},t.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},e=this._dataZoomModel,i=this._dataExtent;ut(["min","max"],(function(o){var n=e.get(o+"Span"),a=e.get(o+"ValueSpan");null!=a&&(a=this.getAxisModel().axis.scale.parse(a)),null!=a?n=y(i[0]+a,i,[0,100],!0):null!=n&&(a=y(n,[0,100],i,!0)-i[0]),t[o+"Span"]=n,t[o+"ValueSpan"]=a}),this)},t.prototype._setAxisModel=function(){var t=this.getAxisModel(),e=this._percentWindow,i=this._valueWindow;if(e){var o=x(i,[0,500]);o=Math.min(o,20);var n=t.axis.scale.rawExtentInfo;0!==e[0]&&n.setDeterminedMinMax("min",+i[0].toFixed(o)),100!==e[1]&&n.setDeterminedMinMax("max",+i[1].toFixed(o)),n.freeze()}},t}();const gt={getTargetSeries:function(t){function e(e){t.eachComponent("dataZoom",(function(i){i.eachTargetAxis((function(o,n){var a=t.getComponent(nt(o),n);e(o,n,a,i)}))}))}e((function(t,e,i,o){i.__dzAxisProxy=null}));var i=[];e((function(e,o,n,a){n.__dzAxisProxy||(n.__dzAxisProxy=new ct(e,o,a,t),i.push(n.__dzAxisProxy))}));var o=d();return c(i,(function(t){c(t.getTargetSeriesModels(),(function(t){o.set(t.uid,t)}))})),o},overallReset:function(t,e){t.eachComponent("dataZoom",(function(t){t.eachTargetAxis((function(e,i){t.getAxisProxy(e,i).reset(t)})),t.eachTargetAxis((function(i,o){t.getAxisProxy(i,o).filterData(t,e)}))})),t.eachComponent("dataZoom",(function(t){var e=t.findRepresentativeAxisProxy();if(e){var i=e.getDataPercentWindow(),o=e.getDataValueWindow();t.setCalculatedRange({start:i[0],end:i[1],startValue:o[0],endValue:o[1]})}}))}};var ft=!1;function vt(t){ft||(ft=!0,t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,gt),function(t){t.registerAction("dataZoom",(function(t,e){var i=at(e,t);c(i,(function(e){e.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})}))}))}(t),t.registerSubTypeDefaulter("dataZoom",(function(){return"slider"})))}const mt=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return i(e,t),e.type="dataZoom.inside",e.defaultOption=b(ht.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e}(ht);var yt=D();function _t(t,e){if(e){t.removeKey(e.model.uid);var i=e.controller;i&&i.dispose()}}function xt(t,e){t.isDisposed()||t.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function Mt(t,e,i,o){return t.coordinateSystem.containPoint([i,o])}function wt(t){t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,(function(t,e){var i=yt(e),o=i.coordSysRecordMap||(i.coordSysRecordMap=d());o.each((function(t){t.dataZoomInfoMap=null})),t.eachComponent({mainType:"dataZoom",subType:"inside"},(function(t){var i=st(t);c(i.infoList,(function(i){var n=i.model.uid,a=o.get(n)||o.set(n,function(t,e){var i={model:e,containsPoint:I(Mt,e),dispatchAction:I(xt,t),dataZoomInfoMap:null,controller:null},o=i.controller=new Q(t.getZr());return c(["pan","zoom","scrollMove"],(function(t){o.on(t,(function(e){var o=[];i.dataZoomInfoMap.each((function(n){if(e.isAvailableBehavior(n.model.option)){var a=(n.getRange||{})[t],s=a&&a(n.dzReferCoordSysInfo,i.model.mainType,i.controller,e);!n.model.get("disabled",!0)&&s&&o.push({dataZoomId:n.model.id,start:s[0],end:s[1]})}})),o.length&&i.dispatchAction(o)}))})),i}(e,i.model));(a.dataZoomInfoMap||(a.dataZoomInfoMap=d())).set(t.uid,{dzReferCoordSysInfo:i,model:t,getRange:null})}))})),o.each((function(t){var e,i=t.controller,n=t.dataZoomInfoMap;if(n){var a=n.keys()[0];null!=a&&(e=n.get(a))}if(e){var s=function(t){var e,i="type_",o={type_true:2,type_move:1,type_false:0,type_undefined:-1},n=!0;return t.each((function(t){var a=t.model,s=!a.get("disabled",!0)&&(!a.get("zoomLock",!0)||"move");o[i+s]>o[i+e]&&(e=s),n=n&&a.get("preventDefaultMouseMove",!0)})),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!n}}}(n);i.enable(s.controlType,s.opt),i.setPointerChecker(t.containsPoint),A(t,"dispatchAction",e.model.get("throttle",!0),"fixRate")}else _t(o,t)}))}))}var St=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return i(e,t),e.prototype.render=function(e,i,n){t.prototype.render.apply(this,arguments),e.noTarget()?this._clear():(this.range=e.getPercentRange(),function(t,e,i){yt(t).coordSysRecordMap.each((function(t){var o=t.dataZoomInfoMap.get(e.uid);o&&(o.getRange=i)}))}(n,e,{pan:o(bt.pan,this),zoom:o(bt.zoom,this),scrollMove:o(bt.scrollMove,this)}))},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){!function(t,e){for(var i=yt(t).coordSysRecordMap,o=i.keys(),n=0;n<o.length;n++){var a=o[n],s=i.get(a),r=s.dataZoomInfoMap;if(r){var l=e.uid;r.get(l)&&(r.removeKey(l),r.keys().length||_t(i,s))}}}(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e}(dt),bt={zoom:function(t,e,i,o){var n=this.range,a=n.slice(),s=t.axisModels[0];if(s){var r=Dt[e](null,[o.originX,o.originY],s,i,t),l=(r.signal>0?r.pixelStart+r.pixelLength-r.pixel:r.pixel-r.pixelStart)/r.pixelLength*(a[1]-a[0])+a[0],h=Math.max(1/o.scale,0);a[0]=(a[0]-l)*h+l,a[1]=(a[1]-l)*h+l;var d=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return $(0,a,[0,100],0,d.minSpan,d.maxSpan),this.range=a,n[0]!==a[0]||n[1]!==a[1]?a:void 0}},pan:At((function(t,e,i,o,n,a){var s=Dt[o]([a.oldX,a.oldY],[a.newX,a.newY],e,n,i);return s.signal*(t[1]-t[0])*s.pixel/s.pixelLength})),scrollMove:At((function(t,e,i,o,n,a){return Dt[o]([0,0],[a.scrollDelta,a.scrollDelta],e,n,i).signal*(t[1]-t[0])*a.scrollDelta}))};function At(t){return function(e,i,o,n){var a=this.range,s=a.slice(),r=e.axisModels[0];if(r)return $(t(s,r,e,i,o,n),s,[0,100],"all"),this.range=s,a[0]!==s[0]||a[1]!==s[1]?s:void 0}}var Dt={grid:function(t,e,i,o,n){var a=i.axis,s={},r=n.model.coordinateSystem.getRect();return t=t||[0,0],"x"===a.dim?(s.pixel=e[0]-t[0],s.pixelLength=r.width,s.pixelStart=r.x,s.signal=a.inverse?1:-1):(s.pixel=e[1]-t[1],s.pixelLength=r.height,s.pixelStart=r.y,s.signal=a.inverse?-1:1),s},polar:function(t,e,i,o,n){var a=i.axis,s={},r=n.model.coordinateSystem,l=r.getRadiusAxis().getExtent(),h=r.getAngleAxis().getExtent();return t=t?r.pointToCoord(t):[0,0],e=r.pointToCoord(e),"radiusAxis"===i.mainType?(s.pixel=e[0]-t[0],s.pixelLength=l[1]-l[0],s.pixelStart=l[0],s.signal=a.inverse?1:-1):(s.pixel=e[1]-t[1],s.pixelLength=h[1]-h[0],s.pixelStart=h[0],s.signal=a.inverse?-1:1),s},singleAxis:function(t,e,i,o,n){var a=i.axis,s=n.model.coordinateSystem.getRect(),r={};return t=t||[0,0],"horizontal"===a.orient?(r.pixel=e[0]-t[0],r.pixelLength=s.width,r.pixelStart=s.x,r.signal=a.inverse?1:-1):(r.pixel=e[1]-t[1],r.pixelLength=s.height,r.pixelStart=s.y,r.signal=a.inverse?-1:1),r}};const It=St;function Rt(t){vt(t),t.registerComponentModel(mt),t.registerComponentView(It),wt(t)}const Tt=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i}return i(e,t),e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=b(ht.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),e}(ht);var Zt=E,Ct="horizontal",Pt="vertical",zt=["line","bar","candlestick","scatter"],Vt={easing:"cubicOut",duration:100,delay:0};function Ot(t){return"vertical"===t?"ns-resize":"ew-resize"}const Bt=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.type=e.type,i._displayables={},i}return i(e,t),e.prototype.init=function(t,e){this.api=e,this._onBrush=o(this._onBrush,this),this._onBrushEnd=o(this._onBrushEnd,this)},e.prototype.render=function(e,i,o,n){if(t.prototype.render.apply(this,arguments),A(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),!1!==e.get("show")){if(e.noTarget())return this._clear(),void this.group.removeAll();n&&"dataZoom"===n.type&&n.from===this.uid||this._buildView(),this._updateView()}else this.group.removeAll()},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){R(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var e=this._displayables.sliderGroup=new T;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(e),this._positionGroup()},e.prototype._resetLocation=function(){var t=this.dataZoomModel,e=this.api,i=t.get("brushSelect")?7:0,o=this._findCoordRect(),n={width:e.getWidth(),height:e.getHeight()},a=this._orient===Ct?{right:n.width-o.x-o.width,top:n.height-30-7-i,width:o.width,height:30}:{right:7,top:o.y,width:30,height:o.height},s=Z(t.option);c(["right","top","width","height"],(function(t){"ph"===s[t]&&(s[t]=a[t])}));var r=C(s,n);this._location={x:r.x,y:r.y},this._size=[r.width,r.height],this._orient===Pt&&this._size.reverse()},e.prototype._positionGroup=function(){var t=this.group,e=this._location,i=this._orient,o=this.dataZoomModel.getFirstTargetAxisModel(),n=o&&o.get("inverse"),a=this._displayables.sliderGroup,s=(this._dataShadowInfo||{}).otherAxisInverse;a.attr(i!==Ct||n?i===Ct&&n?{scaleY:s?1:-1,scaleX:-1}:i!==Pt||n?{scaleY:s?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:s?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:s?1:-1,scaleX:1});var r=t.getBoundingRect([a]);t.x=e.x-r.x,t.y=e.y-r.y,t.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var t=this.dataZoomModel,e=this._size,i=this._displayables.sliderGroup,n=t.get("brushSelect");i.add(new Zt({silent:!0,shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var a=new Zt({shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:"transparent"},z2:0,onclick:o(this._onClickPanel,this)}),s=this.api.getZr();n?(a.on("mousedown",this._onBrushStart,this),a.cursor="crosshair",s.on("mousemove",this._onBrush),s.on("mouseup",this._onBrushEnd)):(s.off("mousemove",this._onBrush),s.off("mouseup",this._onBrushEnd)),i.add(a)},e.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],t){var e=this._size,i=this._shadowSize||[],o=t.series,n=o.getRawData(),a=o.getShadowDim&&o.getShadowDim(),s=a&&n.getDimensionInfo(a)?o.getShadowDim():t.otherDim;if(null!=s){var r=this._shadowPolygonPts,l=this._shadowPolylinePts;if(n!==this._shadowData||s!==this._shadowDim||e[0]!==i[0]||e[1]!==i[1]){var h=n.getDataExtent(s),d=.3*(h[1]-h[0]);h=[h[0]-d,h[1]+d];var u,p=[0,e[1]],c=[0,e[0]],g=[[e[0],0],[0,0]],f=[],v=c[1]/(n.count()-1),m=0,_=Math.round(n.count()/e[0]);n.each([s],(function(t,e){if(_>0&&e%_)m+=v;else{var i=null==t||isNaN(t)||""===t,o=i?0:y(t,h,p,!0);i&&!u&&e?(g.push([g[g.length-1][0],0]),f.push([f[f.length-1][0],0])):!i&&u&&(g.push([m,0]),f.push([m,0])),g.push([m,o]),f.push([m,o]),m+=v,u=i}})),r=this._shadowPolygonPts=g,l=this._shadowPolylinePts=f}this._shadowData=n,this._shadowDim=s,this._shadowSize=[e[0],e[1]];for(var x,M,w,S,b,A=this.dataZoomModel,D=0;D<3;D++){var I=(x=1===D,M=void 0,w=void 0,S=void 0,b=void 0,M=A.getModel(x?"selectedDataBackground":"dataBackground"),w=new T,S=new N({shape:{points:r},segmentIgnoreThreshold:1,style:M.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),b=new F({shape:{points:l},segmentIgnoreThreshold:1,style:M.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19}),w.add(S),w.add(b),w);this._displayables.sliderGroup.add(I),this._displayables.dataShadowSegs.push(I)}}}},e.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,e=t.get("showDataShadow");if(!1!==e){var i,o=this.ecModel;return t.eachTargetAxis((function(n,a){var s=t.getAxisProxy(n,a).getTargetSeriesModels();c(s,(function(t){if(!(i||!0!==e&&u(zt,t.get("type"))<0)){var s,r=o.getComponent(nt(n),a).axis,l={x:"y",y:"x",radius:"angle",angle:"radius"}[n],h=t.coordinateSystem;null!=l&&h.getOtherAxis&&(s=h.getOtherAxis(r).inverse),l=t.getData().mapDimension(l),i={thisAxis:r,series:t,thisDim:n,otherDim:l,otherAxisInverse:s}}}),this)}),this),i}},e.prototype._renderHandle=function(){var t=this.group,e=this._displayables,i=e.handles=[null,null],n=e.handleLabels=[null,null],a=this._displayables.sliderGroup,s=this._size,r=this.dataZoomModel,l=this.api,h=r.get("borderRadius")||0,d=r.get("brushSelect"),u=e.filler=new Zt({silent:d,style:{fill:r.get("fillerColor")},textConfig:{position:"inside"}});a.add(u),a.add(new Zt({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:s[0],height:s[1],r:h},style:{stroke:r.get("dataBackgroundColor")||r.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),c([0,1],(function(e){var s=r.get("handleIcon");!P[s]&&s.indexOf("path://")<0&&s.indexOf("image://")<0&&(s="path://"+s);var l=z(s,-1,0,2,2,null,!0);l.attr({cursor:Ot(this._orient),draggable:!0,drift:o(this._onDragMove,this,e),ondragend:o(this._onDragEnd,this),onmouseover:o(this._showDataInfo,this,!0),onmouseout:o(this._showDataInfo,this,!1),z2:5});var h=l.getBoundingRect(),d=r.get("handleSize");this._handleHeight=V(d,this._size[1]),this._handleWidth=h.width/h.height*this._handleHeight,l.setStyle(r.getModel("handleStyle").getItemStyle()),l.style.strokeNoScale=!0,l.rectHover=!0,l.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),O(l);var u=r.get("handleColor");null!=u&&(l.style.fill=u),a.add(i[e]=l);var p=r.getModel("textStyle");t.add(n[e]=new B({silent:!0,invisible:!0,style:L(p,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:p.getTextColor(),font:p.getFont()}),z2:10}))}),this);var p=u;if(d){var g=V(r.get("moveHandleSize"),s[1]),f=e.moveHandle=new E({style:r.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:s[1]-.5,height:g}}),v=.8*g,m=e.moveHandleIcon=z(r.get("moveHandleIcon"),-v/2,-v/2,v,v,"#fff",!0);m.silent=!0,m.y=s[1]+g/2-.5,f.ensureState("emphasis").style=r.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var y=Math.min(s[1]/2,Math.max(g,10));(p=e.moveZone=new E({invisible:!0,shape:{y:s[1]-y,height:g+y}})).on("mouseover",(function(){l.enterEmphasis(f)})).on("mouseout",(function(){l.leaveEmphasis(f)})),a.add(f),a.add(m),a.add(p)}p.attr({draggable:!0,cursor:Ot(this._orient),drift:o(this._onDragMove,this,"all"),ondragstart:o(this._showDataInfo,this,!0),ondragend:o(this._onDragEnd,this),onmouseover:o(this._showDataInfo,this,!0),onmouseout:o(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),e=this._getViewExtent();this._handleEnds=[y(t[0],[0,100],e,!0),y(t[1],[0,100],e,!0)]},e.prototype._updateInterval=function(t,e){var i=this.dataZoomModel,o=this._handleEnds,n=this._getViewExtent(),a=i.findRepresentativeAxisProxy().getMinMaxSpan(),s=[0,100];$(e,o,n,i.get("zoomLock")?"all":t,null!=a.minSpan?y(a.minSpan,s,n,!0):null,null!=a.maxSpan?y(a.maxSpan,s,n,!0):null);var r=this._range,l=this._range=S([y(o[0],n,s,!0),y(o[1],n,s,!0)]);return!r||r[0]!==l[0]||r[1]!==l[1]},e.prototype._updateView=function(t){var e=this._displayables,i=this._handleEnds,o=S(i.slice()),n=this._size;c([0,1],(function(t){var o=e.handles[t],a=this._handleHeight;o.attr({scaleX:a/2,scaleY:a/2,x:i[t]+(t?-1:1),y:n[1]/2-a/2})}),this),e.filler.setShape({x:o[0],y:0,width:o[1]-o[0],height:n[1]});var a={x:o[0],width:o[1]-o[0]};e.moveHandle&&(e.moveHandle.setShape(a),e.moveZone.setShape(a),e.moveZone.getBoundingRect(),e.moveHandleIcon&&e.moveHandleIcon.attr("x",a.x+a.width/2));for(var s=e.dataShadowSegs,r=[0,o[0],o[1],n[0]],l=0;l<s.length;l++){var h=s[l],d=h.getClipPath();d||(d=new E,h.setClipPath(d)),d.setShape({x:r[l],y:0,width:r[l+1]-r[l],height:n[1]})}this._updateDataInfo(t)},e.prototype._updateDataInfo=function(t){var e=this.dataZoomModel,i=this._displayables,o=i.handleLabels,n=this._orient,a=["",""];if(e.get("showDetail")){var s=e.findRepresentativeAxisProxy();if(s){var r=s.getAxisModel().axis,l=this._range,h=t?s.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:s.getDataValueWindow();a=[this._formatLabel(h[0],r),this._formatLabel(h[1],r)]}}var d=S(this._handleEnds.slice());function u(t){var e=W(i.handles[t].parent,this.group),s=k(0===t?"right":"left",e),r=this._handleWidth/2+5,l=H([d[t]+(0===t?-r:r),this._size[1]/2],e);o[t].setStyle({x:l[0],y:l[1],verticalAlign:n===Ct?"middle":s,align:n===Ct?s:"center",text:a[t]})}u.call(this,0),u.call(this,1)},e.prototype._formatLabel=function(t,e){var i=this.dataZoomModel,o=i.get("labelFormatter"),n=i.get("labelPrecision");null!=n&&"auto"!==n||(n=e.getPixelPrecision());var a=null==t||isNaN(t)?"":"category"===e.type||"time"===e.type?e.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(n,20));return Y(o)?o(t,a):h(o)?o.replace("{value}",a):a},e.prototype._showDataInfo=function(t){t=this._dragging||t;var e=this._displayables,i=e.handleLabels;i[0].attr("invisible",!t),i[1].attr("invisible",!t),e.moveHandle&&this.api[t?"enterEmphasis":"leaveEmphasis"](e.moveHandle,1)},e.prototype._onDragMove=function(t,e,i,o){this._dragging=!0,r(o.event);var n=this._displayables.sliderGroup.getLocalTransform(),a=H([e,i],n,!0),s=this._updateInterval(t,a[0]),l=this.dataZoomModel.get("realtime");this._updateView(!l),s&&l&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(t){var e=this._size,i=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(i[0]<0||i[0]>e[0]||i[1]<0||i[1]>e[1])){var o=this._handleEnds,n=(o[0]+o[1])/2,a=this._updateInterval("all",i[0]-n);this._updateView(),a&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(t){var e=t.offsetX,i=t.offsetY;this._brushStart=new X(e,i),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(t){if(this._brushing){var e=this._displayables.brushRect;if(this._brushing=!1,e){e.attr("ignore",!0);var i=e.shape;if(!(+new Date-this._brushStartTime<200&&Math.abs(i.width)<5)){var o=this._getViewExtent(),n=[0,100];this._range=S([y(i.x,o,n,!0),y(i.x+i.width,o,n,!0)]),this._handleEnds=[i.x,i.x+i.width],this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(t){this._brushing&&(r(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},e.prototype._updateBrushRect=function(t,e){var i=this._displayables,o=this.dataZoomModel,n=i.brushRect;n||(n=i.brushRect=new Zt({silent:!0,style:o.getModel("brushStyle").getItemStyle()}),i.sliderGroup.add(n)),n.attr("ignore",!1);var a=this._brushStart,s=this._displayables.sliderGroup,r=s.transformCoordToLocal(t,e),l=s.transformCoordToLocal(a.x,a.y),h=this._size;r[0]=Math.max(Math.min(h[0],r[0]),0),n.setShape({x:l[0],y:0,width:r[0]-l[0],height:h[1]})},e.prototype._dispatchZoomAction=function(t){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?Vt:null,start:e[0],end:e[1]})},e.prototype._findCoordRect=function(){var t,e=st(this.dataZoomModel).infoList;if(!t&&e.length){var i=e[0].model.coordinateSystem;t=i.getRect&&i.getRect()}if(!t){var o=this.api.getWidth(),n=this.api.getHeight();t={x:.2*o,y:.2*n,width:.6*o,height:.6*n}}return t},e.type="dataZoom.slider",e}(dt);function Lt(t){t.registerComponentModel(Tt),t.registerComponentView(Bt),vt(t)}function Et(t){G(Rt),G(Lt)}export{Et as i};
